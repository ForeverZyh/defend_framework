import numpy as np
import sys

if __name__ == "__main__":
    res = []
    for i in range(5):
        _, a = np.load(f"{sys.argv[1]}/aggre_res{i}.npy")
        res.append(a)
    slices = [slice(100000), slice(200000, 300000), slice(100000, 200000)]
    order = [0, 0, 1]
    A = []
    for o, s in zip(order, slices):
        acc = [[], [], []]
        for i in range(5):
            acc[0].append(np.mean(res[i][s, o] == 1) * 100)
            acc[1].append(np.mean(res[i][s, 1 - o] == 1) * 100)
            acc[2].append(np.mean(res[i][s, 2] == 1) * 100)

        print([(np.mean(acc[i]), np.std(acc[i])) for i in range(3)])
        A.append(acc)

    print([(np.mean([(x + y) / 2 for x, y in zip(A[1][i], A[2][i])]),
           np.std([(x + y) / 2 for x, y in zip(A[1][i], A[2][i])])) for i in range(3)])

    acc = [[], [], []]
    for i in range(5):
        index = res[i][slices[1], 1] == 1
        acc[0].append(np.mean(res[i][slices[0]][index, 0] == 1) * 100)
        acc[1].append(np.mean(res[i][slices[0]][index, 1] == 1) * 100)
        acc[2].append(np.mean(res[i][slices[0]][index, 2] == 1) * 100)

    print([(np.mean(acc[i]), np.std(acc[i])) for i in range(3)])
